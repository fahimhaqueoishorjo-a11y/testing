<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediQ Webframe</title>
    <!-- Use the specified font -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --theme-color: #1b0b54;
            --text-color: #ffffff;
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: var(--theme-color);
        }

        /* Full-screen popup styles for all error messages */
        .full-screen-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--theme-color);
            color: var(--text-color);
            display: none; /* Hidden by default */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            z-index: 1000;
        }

        .full-screen-popup h1 {
            font-size: 4rem;
            margin: 0;
            font-weight: 700;
        }

        .full-screen-popup p {
            font-size: 1.5rem;
            max-width: 80%;
            margin-top: 1rem;
            line-height: 1.6;
        }

        /* Canvas for the particles - to be added later */
        #particle-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            z-index: 1;
        }

        /* Styles for the iframe */
        #main-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 2;
        }
    </style>
</head>
<body>

    <!-- Main Webframe Container - This will now host the iframe -->
    <div id="webframe-container">
        <!-- Canvas for particle effects. The user will provide the details later. -->
        <canvas id="particle-canvas"></canvas>
    </div>

    <!-- Popup for No Internet Connection -->
    <div id="no-internet-popup" class="full-screen-popup">
        <h1>Opsss!</h1>
        <p>ওহ! কোনো ইন্টারনেট সংযোগ নেই।</p>
    </div>

    <!-- Popup for Blocked IP Address -->
    <div id="blocked-ip-popup" class="full-screen-popup">
        <h1>Opsss!</h1>
        <p>You are blocked.</p>
    </div>

    <!-- Popup for VPN/Non-Bangladeshi User -->
    <div id="vpn-popup" class="full-screen-popup">
        <h1>Opsss!</h1>
        <p>I hate you!</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const noInternetPopup = document.getElementById('no-internet-popup');
            const blockedIpPopup = document.getElementById('blocked-ip-popup');
            const vpnPopup = document.getElementById('vpn-popup');
            const webframeContainer = document.getElementById('webframe-container');

            // Function to show a specific popup and hide others
            function showPopup(popupElement) {
                // Hide all popups first
                noInternetPopup.style.display = 'none';
                blockedIpPopup.style.display = 'none';
                vpnPopup.style.display = 'none';
                
                // Then show the requested one
                if (popupElement) {
                    popupElement.style.display = 'flex';
                }
            }
            
            // --- UPDATED LOGIC START ---
            
            // Check internet connection instantly
            if (!navigator.onLine) {
                showPopup(noInternetPopup);
                return; // Stop further execution
            }

            // --- SIMULATED LOGIC FOR IP/COUNTRY CHECKS START ---
            // In a real application, you would use a backend API or a client-side
            // service to get the user's IP and geolocation data.
            const simulatedUser = {
                ip: '103.178.212.33',
                country: 'Bangladesh', // Set to 'Bangladesh' for a successful load
                isBlocked: false,
                isOnline: true
            };
            
            const blockedIPs = [
                '103.178.942',
                '203.0.113'
            ];
            
            // Check if the user's IP starts with any of the blocked prefixes
            const isIpBlocked = blockedIPs.some(blockedPrefix => simulatedUser.ip.startsWith(blockedPrefix));
            if (isIpBlocked) {
                showPopup(blockedIpPopup);
                return; // Stop further execution
            }

            // Check if the user is from Bangladesh (or is using a VPN)
            const isVpnUser = simulatedUser.country !== 'Bangladesh';
            if (isVpnUser) {
                showPopup(vpnPopup);
                return; // Stop further execution
            }
            // --- SIMULATED LOGIC FOR IP/COUNTRY CHECKS END ---

            // If all checks pass, create and append the iframe
            const iframe = document.createElement('iframe');
            iframe.id = 'main-iframe';
            iframe.src = 'https://google.com';
            webframeContainer.appendChild(iframe);
        });

        // Event listener for the online/offline status, will trigger instantly if no connection is detected
        window.addEventListener('offline', () => {
            document.getElementById('no-internet-popup').style.display = 'flex';
        });

        window.addEventListener('online', () => {
            document.getElementById('no-internet-popup').style.display = 'none';
        });
        
        // Particle system logic will go here. The user said they will provide more details later.
        // For now, the canvas is just a placeholder.
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // This is a placeholder for where the user-defined particle code will be added.
    </script>

</body>
</html>
